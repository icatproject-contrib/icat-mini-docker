#! /usr/bin/python3

from pathlib import Path
import socket

maindir = Path(__file__).resolve().parent.parent
icat_cfg_file = maindir / 'icat' / 'icat-config' / 'CONFIG'
env_file = maindir / '.env'

cfg = {
    'COMPOSE_FILE': 'compose.yaml',
    'COMPOSE_PROJECT_NAME': 'icat-mini',
    'IMAGE': None,
    'GLASSFISH_HOME': None,
    'HOSTNAME': socket.getfqdn(),
}

with icat_cfg_file.open('rt') as f:
    for l in f:
        k, v = l.strip().split('=')
        cfg[k] = v

with env_file.open('wt') as f:
    for k in cfg:
        print("%s=%s" % (k, cfg[k]), file=f)
